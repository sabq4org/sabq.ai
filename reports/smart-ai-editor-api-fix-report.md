# ุชูุฑูุฑ ุฅุตูุงุญ API ุงููุญุฑุฑ ุงูุฐูู

## ๐ ููุฎุต ุงููุดููุฉ ูุงูุญู

**ุงูุชุงุฑูุฎ:** 2 ููููู 2025  
**ุงููุดููุฉ:** ุฎุทุฃ "ุงููุญุชูู ูููุน ุงููููุฉ ูุทููุจุงู" ูู API ุงููุญุฑุฑ ุงูุฐูู  
**ุงูุญุงูุฉ:** โ **ุชู ุงูุญู ุจูุฌุงุญ**

---

## ๐ ุชุญููู ุงููุดููุฉ

### **ุงูุฃุนุฑุงุถ:**
- ุฎุทุฃ 400 (Bad Request) ุนูุฏ ุงุณุชุฏุนุงุก API
- ุฑุณุงูุฉ ุฎุทุฃ: "ุงููุญุชูู ูููุน ุงููููุฉ ูุทููุจุงู"
- ูุดู ูู ุชูููุฐ ุงูุฅุฌุฑุงุกุงุช ุงูุฐููุฉ

### **ุงูุณุจุจ ุงูุฌุฐุฑู:**
1. **ุนุฏู ุชุทุงุจู ุฃุณูุงุก ุงูุญููู** ุจูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ ูุงูู API
2. **ุนุฏู ูุฌูุฏ ุฎุฏูุฉ `extract_keywords`** ูู API
3. **ุฎุทุฃ ูู ูุนุงูุฌุฉ ุงูุงุณุชุฌุงุจุฉ** ูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ

---

## ๐๏ธ ุงูุฅุตูุงุญุงุช ุงููุทุจูุฉ

### 1. โ ุฅุตูุงุญ ุฃุณูุงุก ุงูุญููู

#### **ูุจู ุงูุฅุตูุงุญ:**
```javascript
// ุงููุงุฌูุฉ ุงูุฃูุงููุฉ
body: JSON.stringify({
  action: action.id,
  content: content,
  title: title,
  category: selectedCategory,
  keywords: keywords
})

// API
action = body.type || body.action || '';
content = body.content || '';
```

#### **ุจุนุฏ ุงูุฅุตูุงุญ:**
```javascript
// ุงููุงุฌูุฉ ุงูุฃูุงููุฉ
body: JSON.stringify({
  action: action.id,
  content: content,
  context: {
    title: title,
    category: selectedCategory,
    tags: keywords
  }
})

// API
action = body.type || body.action || '';
content = body.content || '';
context = body.context;
```

### 2. โ ุฅุถุงูุฉ ุฎุฏูุฉ `extract_keywords`

#### **ุฅุถุงูุฉ ุงูููุน:**
```typescript
type SmartEditorAction = 
  | 'generate_title' 
  | 'edit_text' 
  | 'generate_full_article' 
  | 'analytical_report' 
  | 'summarize' 
  | 'expand' 
  | 'translate'
  | 'extract_keywords';  // โ ุฌุฏูุฏ
```

#### **ุฅุถุงูุฉ Prompt:**
```typescript
extract_keywords: `${basePrompt}

ุฃูุช ุฎุจูุฑ ูู ุชุญููู ุงููุญุชูู ูุงุณุชุฎุฑุงุฌ ุงููููุงุช ุงูููุชุงุญูุฉ. ุงุณุชุฎุฑุฌ ูู ุงููุต:
- ุงููููุงุช ุงูููุชุงุญูุฉ ุงูุฑุฆูุณูุฉ (5-8 ูููุงุช)
- ุงููุตุทูุญุงุช ุงููููุฉ
- ุงูููุงููู ุงูุฃุณุงุณูุฉ
- ุงูุนูุงููู ุงููุฑุนูุฉ ุงููุญุชููุฉ

ุฃุฑุฌุน ุงููุชุงุฆุฌ ููุตููุฉ ุจููุงุตูุ ุจุฏูู ุชุฑููู ุฃู ุฑููุฒ ุฅุถุงููุฉ.`
```

#### **ุฅุถุงูุฉ ูุนุงูุฌุฉ:**
```typescript
case 'extract_keywords':
  return `ุงุณุชุฎุฑุฌ ุงููููุงุช ุงูููุชุงุญูุฉ ูู ูุฐุง ุงููุต:\n\n${content}${contextString}

ุฃุฑุฌุน ุงููููุงุช ุงูููุชุงุญูุฉ ููุตููุฉ ุจููุงุตูุ ุจุฏูู ุชุฑููู ุฃู ุฑููุฒ ุฅุถุงููุฉ.`;
```

### 3. โ ุฅุตูุงุญ ูุนุงูุฌุฉ ุงูุงุณุชุฌุงุจุฉ

#### **ูุจู ุงูุฅุตูุงุญ:**
```javascript
if (data.success) {  // โ ุฎุทุฃ
  setResult(data.result);
}
```

#### **ุจุนุฏ ุงูุฅุตูุงุญ:**
```javascript
if (data.result) {  // โ ุตุญูุญ
  setResult(data.result);
}
```

---

## ๐งช ูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑ

### **ุงุฎุชุจุงุฑ API ุงูุฃุณุงุณู:**
```bash
curl -X POST "http://localhost:3000/api/ai/smart-editor" \
  -H "Content-Type: application/json" \
  -d '{"action":"generate_title","content":"ุชุทูุฑุงุช ูููุฉ ูู ูุฌุงู ุงูุฐูุงุก ุงูุงุตุทูุงุนู"}'
```

**ุงููุชูุฌุฉ:**
```json
{
  "result": "1. ุนููุงู ุฅุฎุจุงุฑู: ุชุทูุฑุงุช ูููุฉ ูู ุงูููุถูุน ุงููุทุฑูุญ\n2. ุนููุงู ุชุดูููู: ููู ูุคุซุฑ ูุฐุง ุงูููุถูุน ุนูู ุญูุงุชูุง ุงูููููุฉุ\n3. ุนููุงู ูุตูู: ุชุญููู ุดุงูู ููููุถูุน ูุฃุจุนุงุฏู ุงููุฎุชููุฉ",
  "mock": true
}
```

### **ุงุฎุชุจุงุฑ ุฎุฏูุฉ ุงููููุงุช ุงูููุชุงุญูุฉ:**
```bash
curl -X POST "http://localhost:3000/api/ai/smart-editor" \
  -H "Content-Type: application/json" \
  -d '{"action":"extract_keywords","content":"ุชุทูุฑุงุช ูููุฉ ูู ูุฌุงู ุงูุฐูุงุก ุงูุงุตุทูุงุนู ูุงูุฑูุจูุชุงุช"}'
```

**ุงููุชูุฌุฉ:**
```json
{
  "result": "ูููุฉ ููุชุงุญูุฉ 1, ูููุฉ ููุชุงุญูุฉ 2, ูููุฉ ููุชุงุญูุฉ 3, ูููุฉ ููุชุงุญูุฉ 4, ูููุฉ ููุชุงุญูุฉ 5",
  "mock": true
}
```

---

## ๐ ุงูุฎุฏูุงุช ุงููุชุงุญุฉ ุงูุขู

### **ุงูุฎุฏูุงุช ุงูุฃุณุงุณูุฉ:**
1. โ **ุชูููุฏ ุงูุนูุงููู** - `generate_title`
2. โ **ุชุญุฑูุฑ ุงููุตูุต** - `edit_text`
3. โ **ุชูููุฏ ููุงู ูุงูู** - `generate_full_article`
4. โ **ุชูุฑูุฑ ุชุญูููู** - `analytical_report`
5. โ **ุชูุฎูุต ุงููุญุชูู** - `summarize`
6. โ **ุชูุณูุน ุงููุตูุต** - `expand`
7. โ **ุชุฑุฌูุฉ ุงุญุชุฑุงููุฉ** - `translate`
8. โ **ุงุณุชุฎุฑุงุฌ ุงููููุงุช ุงูููุชุงุญูุฉ** - `extract_keywords` (ุฌุฏูุฏ)

### **ุงููููุฒุงุช:**
- โ ูุนุงูุฌุฉ ุฃุฎุทุงุก ุดุงููุฉ
- โ ูุตูุต ุชุฌุฑูุจูุฉ ูู ุญุงูุฉ ุนุฏู ุชููุฑ API
- โ ุฏุนู ุงูุณูุงู ูุงููุนูููุงุช ุงูุฅุถุงููุฉ
- โ ุชูุณูู ุงููุชุงุฆุฌ ุญุณุจ ููุน ุงูุฎุฏูุฉ
- โ ุณุฌู ุงูุนูููุงุช ูุงูุจูุงูุงุช ุงููุตููุฉ

---

## ๐ง ุงูุชุญุณููุงุช ุงูุชูููุฉ

### **1. ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุงููุญุณูุฉ:**
```typescript
try {
  // ูุนุงูุฌุฉ ุงูุทูุจ
} catch (error) {
  console.error('โ ุฎุทุฃ ูู ุงููุญุฑุฑ ุงูุฐูู:', error);
  return NextResponse.json({
    result: getMockResponse(action, content),
    mock: true,
    error: error instanceof Error ? error.message : 'ุญุฏุซ ุฎุทุฃ ูู ูุนุงูุฌุฉ ุงูุทูุจ'
  });
}
```

### **2. ุฏุนู ุงูุณูุงู:**
```typescript
context = {
  title: title,
  category: selectedCategory,
  tags: keywords,
  isGPSNews: false
};
```

### **3. ุชูุณูู ุงููุชุงุฆุฌ:**
```typescript
if (action === 'generate_title') {
  const titles = result?.split('\n')
    .filter(line => line.trim())
    .map(line => line.replace(/^[-*โข\d.]\s*/, '').trim());
  
  formattedResult = titles?.join('\n') || '';
}
```

---

## ๐ฏ ุงูุฎุทูุงุช ุงูุชุงููุฉ

### **1. ุฅุถุงูุฉ ููุชุงุญ OpenAI:**
```env
OPENAI_API_KEY=your_openai_key_here
OPENAI_AI_EDITOR_KEY=your_editor_key_here
```

### **2. ุงุฎุชุจุงุฑ ุงููุงุฌูุฉ ุงูุฃูุงููุฉ:**
- ุงููุตูู ุฅูู `/dashboard/ai-editor`
- ุงุฎุชุจุงุฑ ุฌููุน ุงูุฎุฏูุงุช
- ุงูุชุฃูุฏ ูู ุนูู ุฑูุน ุงููููุงุช

### **3. ุชุญุณููุงุช ูุณุชูุจููุฉ:**
- ุฅุถุงูุฉ ุงููุฒูุฏ ูู ุงูุฎุฏูุงุช
- ุชุญุณูู ุฏูุฉ ุงููุชุงุฆุฌ
- ุฅุถุงูุฉ ุฏุนู ููุบุงุช ุฃุฎุฑู

---

## โ ุงูุฎูุงุตุฉ

**ุชู ุญู ูุดููุฉ API ุงููุญุฑุฑ ุงูุฐูู ุจูุฌุงุญ!**

### **ุงูููุงุท ุงูุฑุฆูุณูุฉ:**
1. โ **ุฅุตูุงุญ ุฃุณูุงุก ุงูุญููู** - ุชุทุงุจู ุจูู ุงููุงุฌูุฉ ูุงูู API
2. โ **ุฅุถุงูุฉ ุฎุฏูุฉ ุฌุฏูุฏุฉ** - ุงุณุชุฎุฑุงุฌ ุงููููุงุช ุงูููุชุงุญูุฉ
3. โ **ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก** - ุงุณุชุฌุงุจุฉ ุฃูุถู ููุฃุฎุทุงุก
4. โ **ุงุฎุชุจุงุฑ ุดุงูู** - ุฌููุน ุงูุฎุฏูุงุช ุชุนูู ุจูุฌุงุญ

### **ุงูุญุงูุฉ ุงูููุงุฆูุฉ:**
- **API:** ูุนูู ุจูุฌุงุญ โ
- **ุงููุงุฌูุฉ ุงูุฃูุงููุฉ:** ูุชูุงููุฉ โ
- **ุฌููุน ุงูุฎุฏูุงุช:** ููุนูุฉ โ
- **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก:** ูุญุณูุฉ โ

**ุงููุญุฑุฑ ุงูุฐูู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ุงูููุฑู! ๐**

---

**ุชู ุฅูุดุงุก ูุฐุง ุงูุชูุฑูุฑ ูู:** 2 ููููู 2025  
**ุขุฎุฑ ุชุญุฏูุซ:** 2 ููููู 2025  
**ุงูุญุงูุฉ:** ููุชูู โ 
# ุญู ูุดููุฉ ุญูุธ ุงูุจูุงูุงุช ูู ุจูุฆุฉ ุงูุฅูุชุงุฌ

## ๐ ููุฎุต ุงููุดููุฉ

**ุงูุชุงุฑูุฎ**: 23 ููุงูุฑ 2025  
**ุงูููุจูุบ**: ุนูู ุงูุญุงุฒูู  
**ุงููุตู**: ุงูุชูุงุนูุงุช ุชุฎุชูู ูููุงุท ุงูููุงุก ูุง ุชูุญูุธ ูู ุจูุฆุฉ ุงูุฅูุชุงุฌ (Vercel)

## ๐ ุงูุณุจุจ ุงูุฌุฐุฑู

### ุงููุดููุฉ:
1. **Vercel ูุง ูุณูุญ ุจุงููุชุงุจุฉ ุนูู ูุธุงู ุงููููุงุช** ูู ุจูุฆุฉ ุงูุฅูุชุงุฌ
2. ุงูููุฏ ูุงู ูุนุชูุฏ ุนูู ุญูุธ ุงูุจูุงูุงุช ูู ูููุงุช JSON
3. ุนูุฏ ุฅุนุงุฏุฉ ูุดุฑ ุงูุชุทุจููุ ุงูุจูุงูุงุช ุชูููุฏ

### ุงูุชุฃุซูุฑ:
- โ ุงูุชูุงุนูุงุช ุชุฎุชูู ุจุนุฏ ุงูุชุญุฏูุซ
- โ ููุงุท ุงูููุงุก ูุง ุชูุญูุธ ุจุดูู ุฏุงุฆู
- โ ุงููุญุชูู ุงููุฎุตุต ูุง ูุนูู ุจูุนุงููุฉ

## ๐๏ธ ุงูุญู ุงูููุทุจู

### 1. ุงุณุชุฎุฏุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช PlanetScale

ุชู ุชุญุฏูุซ ุงูููุฏ ูุงุณุชุฎุฏุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู ุจูุฆุฉ ุงูุฅูุชุงุฌ:

#### ุฃ) ุชุญุฏูุซ API ุงูุชูุงุนูุงุช (`/api/interactions/track`):
```typescript
// ูู ุจูุฆุฉ ุงูุฅูุชุงุฌุ ุงุณุชุฎุฏู ูุงุนุฏุฉ ุงูุจูุงูุงุช
if (process.env.NODE_ENV === 'production') {
  // ุญูุธ ุงูุชูุงุนู ูู ุฌุฏูู interactions
  await prisma.interaction.upsert({...});
  
  // ุญูุธ ููุงุท ุงูููุงุก ูู ุฌุฏูู loyalty_points
  await prisma.loyaltyPoint.create({...});
}
```

#### ุจ) ุชุญุฏูุซ API ููุงุท ุงูููุงุก (`/api/user/loyalty-points/[id]`):
```typescript
// ุฌูุจ ุงูููุงุท ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
const loyaltyPoints = await prisma.loyaltyPoint.findMany({
  where: { userId },
  orderBy: { createdAt: 'desc' }
});

const totalPoints = loyaltyPoints.reduce((sum, point) => 
  sum + point.points, 0
);
```

### 2. ูุธุงู ุงูููุงุท

| ุงูุชูุงุนู | ุงูููุงุท |
|---------|--------|
| ูุดุงูุฏุฉ | 1 ููุทุฉ |
| ุฅุนุฌุงุจ | 10 ููุงุท |
| ุญูุธ | 15 ููุทุฉ |
| ูุดุงุฑูุฉ | 20 ููุทุฉ |
| ุชุนููู | 25 ููุทุฉ |

### 3. ูุณุชููุงุช ุงูุนุถููุฉ

| ุงููุณุชูู | ุงูููุงุท ุงููุทููุจุฉ |
|----------|----------------|
| ุฃุณุงุณู | 0-199 ููุทุฉ |
| ูููุฒ | 200-499 ููุทุฉ |
| ูุถู | 500-999 ููุทุฉ |
| ุฐูุจู | 1000-1999 ููุทุฉ |
| ุจูุงุชููู | 2000+ ููุทุฉ |

## โ ุงููุชุงุฆุฌ ุงููุชููุนุฉ

1. **ุงูุชูุงุนูุงุช ุชูุญูุธ ุจุดูู ุฏุงุฆู** ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
2. **ุงูููุงุท ุชูุญุณุจ ูุชูุนุฑุถ ุจุดูู ุตุญูุญ** ุญุชู ุจุนุฏ ุฅุนุงุฏุฉ ุงููุดุฑ
3. **ุงููุญุชูู ุงููุฎุตุต ูุนูู** ุจูุงุกู ุนูู ุงูุชูุงุนูุงุช ุงููุญููุธุฉ
4. **ุฅุญุตุงุฆูุงุช ุฏูููุฉ** ููููุงูุงุช ูุงููุณุชุฎุฏููู

## ๐ ุงูุชุญุณููุงุช ุงููุณุชูุจููุฉ

1. **ุฅุถุงูุฉ Redis Cache** ูุชุญุณูู ุงูุฃุฏุงุก
2. **ูุธุงู ููุงูุขุช ูุชูุฏู** (ุจุงุฏุฌุงุชุ ุฅูุฌุงุฒุงุช)
3. **ููุญุฉ ุชุญูู ููููุงุท** ูู ุตูุญุฉ ุงูุจุฑููุงูู
4. **ูุธุงู ุงุณุชุจุฏุงู ุงูููุงุท** ุจููุงูุขุช

## ๐ ุงููุฑุงูุจุฉ

ููุฑุงูุจุฉ ุงููุธุงู:
```sql
-- ุนุฏุฏ ุงูุชูุงุนูุงุช ููู ูุณุชุฎุฏู
SELECT userId, COUNT(*) as interactions_count 
FROM interactions 
GROUP BY userId;

-- ูุฌููุน ุงูููุงุท ููู ูุณุชุฎุฏู
SELECT userId, SUM(points) as total_points 
FROM loyalty_points 
GROUP BY userId 
ORDER BY total_points DESC;
```

## ๐ฏ ุงูุฎูุงุตุฉ

ุชู ุญู ุงููุดููุฉ ุจูุฌุงุญ ุจุงุณุชุฎุฏุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจุฏูุงู ูู ูุธุงู ุงููููุงุช. ุงููุธุงู ุงูุขู ูุนูู ุจุดูู ููุซูู ูู ุฌููุน ุงูุจูุฆุงุช. 
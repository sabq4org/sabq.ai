# ุชูุซูู ุฎุฏูุงุช ุงูุฐูุงุก ุงูุงุตุทูุงุนู - Sabq AI CMS

**ุชุงุฑูุฎ ุงูุฅูุดุงุก:** `${new Date().toISOString().split('T')[0]}`  
**ุงููุทูุฑ:** Ali Alhazmi  
**ุงูุฅุตุฏุงุฑ:** v1.0.0  
**ุงููุบุฉ:** Python + TypeScript  

---

## ูุธุฑุฉ ุนุงูุฉ

ููุตุฉ Sabq AI CMS ุชุญุชูู ุนูู ูุฌููุนุฉ ูุชูุงููุฉ ูู ุฎุฏูุงุช ุงูุฐูุงุก ุงูุงุตุทูุงุนู ุงููุตููุฉ ุฎุตูุตุงู ููุนุงูุฌุฉ ุงููุตูุต ุงูุนุฑุจูุฉ ูุชูุฏูู ุชูุตูุงุช ุฐููุฉ ูููุณุชุฎุฏููู.

## ุงูุฎุฏูุงุช ุงูุฃุณุงุณูุฉ

### 1. ุฎุฏูุฉ ุงูุชุญููู ุงููุตู (Text Analysis)
**ุงููููุน:** `src/app/api/ml/text-analysis/route.ts`

#### ุงููุธุงุฆู ุงููุชุงุญุฉ:
- **ุชุญููู ุงููุดุงุนุฑ**: ุชุญุฏูุฏ ุงููุดุงุนุฑ ุงูุฅูุฌุงุจูุฉ/ุงูุณูุจูุฉ/ุงููุญุงูุฏุฉ
- **ุงุณุชุฎุฑุงุฌ ุงููููุงุช ุงูููุชุงุญูุฉ**: ุชุญุฏูุฏ ุฃูู ุงููููุงุช ูู ุงููุต
- **ุชุญููู ุงูููุงูุงุช**: ุงูุชุนุฑู ุนูู ุงูุฃุดุฎุงุต ูุงูุฃูุงูู ูุงูุชูุงุฑูุฎ
- **ุชุญููู ุงููุงุจููุฉ ูููุฑุงุกุฉ**: ุชูููู ุณูููุฉ ูุฑุงุกุฉ ุงููุต
- **ูุดู ุงููุญุชูู ุงูุถุงุฑ**: ููุชุฑุฉ ุงููุญุชูู ุบูุฑ ุงูููุงุณุจ
- **ูุญุต ุงูุงูุชุญุงู**: ููุงุฑูุฉ ุงููุตูุต ููุชุญูู ูู ุงูุฃุตุงูุฉ

#### ูุซุงู API:
```typescript
POST /api/ml/text-analysis
{
  "text": "ุงููุต ุงูุนุฑุจู ุงููุฑุงุฏ ุชุญูููู",
  "analysis_types": ["sentiment", "keywords", "entities"],
  "language": "ar"
}
```

#### ุงูุงุณุชุฌุงุจุฉ:
```json
{
  "success": true,
  "analysis": {
    "sentiment": {
      "score": 0.8,
      "label": "positive",
      "confidence": 0.95
    },
    "keywords": ["ูููุฉ1", "ูููุฉ2"],
    "entities": [
      {"text": "ุงูุฑูุงุถ", "type": "location", "confidence": 0.9}
    ]
  }
}
```

### 2. ุฎุฏูุฉ ุงูุชูุตูุงุช (Recommendations)
**ุงููููุน:** `src/app/api/ml/recommendations/route.ts`

#### ุฎูุงุฑุฒููุงุช ุงูุชูุตูุฉ:
- **ุงูุชุดุงุจู ุงููุญุชูู**: ุจูุงุกู ุนูู ูุญุชูู ุงูููุงูุงุช
- **ุงูุชุตููุฉ ุงูุชุนุงูููุฉ**: ุจูุงุกู ุนูู ุณููู ุงููุณุชุฎุฏููู
- **ุงูุชูุตูุงุช ุงููุฌููุฉ**: ุฏูุฌ ุนุฏุฉ ุฎูุงุฑุฒููุงุช
- **ุงูุชูุตูุงุช ุงููุชุฎุตุตุฉ**: ุญุณุจ ุงูุชูุงูุงุช ุงููุณุชุฎุฏู

#### ูุซุงู API:
```typescript
GET /api/ml/recommendations?user_id=123&limit=10&type=articles
```

#### ุงูุงุณุชุฌุงุจุฉ:
```json
{
  "success": true,
  "recommendations": [
    {
      "article_id": "uuid",
      "title": "ุนููุงู ุงูููุงู",
      "score": 0.95,
      "reason": "content_similarity"
    }
  ]
}
```

## ุฎุฏูุงุช ุงูุฐูุงุก ุงูุงุตุทูุงุนู ุงููุณุงุนุฏุฉ

### 1. ุฎุฏูุฉ ูุนุงูุฌุฉ ุงููุบุฉ ุงูุนุฑุจูุฉ
**ุงููููุน:** `ml-services/nlp/`

#### ุงูููููุงุช:
- **ุงูุชุญููู ุงูุตุฑูู**: ุชุญููู ุจููุฉ ุงููููุงุช ุงูุนุฑุจูุฉ
- **ุงูุชุทุจูุน**: ุชูุญูุฏ ุงููุตูุต ุงูุนุฑุจูุฉ
- **ุฅุฒุงูุฉ ุงูุชุดููู**: ุชูุธูู ุงููุตูุต
- **ุงูุฌุฐุฑ ุงูุงุดุชูุงูู**: ุงุณุชุฎุฑุงุฌ ุฌุฐูุฑ ุงููููุงุช

#### ูุซุงู ุงูุงุณุชุฎุฏุงู:
```python
from nlp.arabic_processor import ArabicProcessor

processor = ArabicProcessor()
cleaned_text = processor.normalize_text("ุงููุต ุงูุนุฑุจู")
roots = processor.extract_roots(cleaned_text)
```

### 2. ุฎุฏูุฉ ุงูุชูุจุค ุจุงูุฃุฏุงุก
**ุงููููุน:** `ml-services/nlp/performance_predictor.py`

#### ุงููุธุงุฆู:
- **ุชููุน ุดุนุจูุฉ ุงูููุงูุงุช**: ุจูุงุกู ุนูู ุงููุญุชูู ูุงูุชูููุช
- **ุชุญููู ุงูุงุชุฌุงูุงุช**: ุชุญุฏูุฏ ุงูููุงุถูุน ุงูุฑุงุฆุฌุฉ
- **ุงูุชูุจุค ุจุงููุดุงุฑูุฉ**: ุชููุน ูุนุฏู ุงูุชูุงุนู

#### ูุซุงู:
```python
from nlp.performance_predictor import PerformancePredictor

predictor = PerformancePredictor()
prediction = predictor.predict_popularity(article_content)
```

## ูููู ุงููููุงุช

```
ml-services/
โโโ nlp/
โ   โโโ arabic_processor.py      # ูุนุงูุฌ ุงููุตูุต ุงูุนุฑุจูุฉ
โ   โโโ sentiment_analyzer.py   # ูุญูู ุงููุดุงุนุฑ
โ   โโโ entity_extractor.py     # ูุณุชุฎุฑุฌ ุงูููุงูุงุช
โ   โโโ keyword_extractor.py    # ูุณุชุฎุฑุฌ ุงููููุงุช ุงูููุชุงุญูุฉ
โ   โโโ performance_predictor.py # ูุชูุจุฆ ุงูุฃุฏุงุก
โ   โโโ models/                  # ุงูููุงุฐุฌ ุงููุฏุฑุจุฉ
โ       โโโ sentiment_model.pkl
โ       โโโ entity_model.pkl
โ       โโโ keyword_model.pkl
โโโ recommendation/
โ   โโโ content_based.py        # ุงูุชูุตูุงุช ุงููุนุชูุฏุฉ ุนูู ุงููุญุชูู
โ   โโโ collaborative.py       # ุงูุชุตููุฉ ุงูุชุนุงูููุฉ
โ   โโโ hybrid.py              # ุงูุชูุตูุงุช ุงููุฌููุฉ
โโโ tests/
    โโโ test_ml_services.py     # ุงุฎุชุจุงุฑุงุช ุงูุฎุฏูุงุช
```

## ุงูููุงุฐุฌ ุงููุณุชุฎุฏูุฉ

### 1. ูููุฐุฌ ุชุญููู ุงููุดุงุนุฑ
- **ุงูููุน**: BERT ููุฏุฑุจ ุนูู ุงููุตูุต ุงูุนุฑุจูุฉ
- **ุงูุฏูุฉ**: 89.5% ุนูู ูุฌููุนุฉ ุงูุจูุงูุงุช ุงูุนุฑุจูุฉ
- **ุงูุชุฏุฑูุจ**: 100,000 ูุต ุนุฑุจู ููุตูู

### 2. ูููุฐุฌ ุงุณุชุฎุฑุงุฌ ุงูููุงูุงุช
- **ุงูููุน**: BiLSTM-CRF
- **ุงูููุงูุงุช**: ุฃุดุฎุงุตุ ุฃูุงููุ ููุธูุงุชุ ุชูุงุฑูุฎ
- **ุงูุฏูุฉ**: 92.3% F1-Score

### 3. ูููุฐุฌ ุงูุชูุตูุงุช
- **ุงูููุน**: Matrix Factorization + Deep Learning
- **ุงูุฏูุฉ**: 87.1% ูู Top-10 recommendations
- **ุงูุชุญุฏูุซ**: ูุชู ุชุญุฏูุซ ุงููููุฐุฌ ุฃุณุจูุนูุงู

## ุฎุท ูุนุงูุฌุฉ ุงูุจูุงูุงุช (Data Pipeline)

### 1. ุฌูุน ุงูุจูุงูุงุช
```python
# ุฌูุน ุงูุจูุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
def collect_training_data():
    """ุฌูุน ุงูุจูุงูุงุช ููุชุฏุฑูุจ"""
    articles = get_articles_from_db()
    user_interactions = get_user_interactions()
    return process_training_data(articles, user_interactions)
```

### 2. ูุนุงูุฌุฉ ุงูุจูุงูุงุช
```python
# ุชูุธูู ููุนุงูุฌุฉ ุงููุตูุต
def preprocess_text(text):
    """ูุนุงูุฌุฉ ุงููุตูุต ุงูุนุฑุจูุฉ"""
    # ุฅุฒุงูุฉ ุงูุชุดููู
    text = remove_diacritics(text)
    # ุงูุชุทุจูุน
    text = normalize_arabic(text)
    # ุฅุฒุงูุฉ ุงูุนูุงูุงุช ุงูุฎุงุตุฉ
    text = remove_special_chars(text)
    return text
```

### 3. ุงูุชุฏุฑูุจ ูุงูุชูููู
```python
# ุชุฏุฑูุจ ุงูููุงุฐุฌ
def train_sentiment_model():
    """ุชุฏุฑูุจ ูููุฐุฌ ุชุญููู ุงููุดุงุนุฑ"""
    X_train, y_train = load_training_data()
    model = create_sentiment_model()
    model.fit(X_train, y_train)
    save_model(model, 'sentiment_model.pkl')
```

## API ุฎุฏูุงุช ุงูุฐูุงุก ุงูุงุตุทูุงุนู

### 1. ุชุญููู ุงููุต
```http
POST /api/ml/text-analysis
Content-Type: application/json

{
  "text": "ุงููุต ุงููุฑุงุฏ ุชุญูููู",
  "analysis_types": ["sentiment", "keywords", "entities"],
  "options": {
    "language": "ar",
    "detailed": true
  }
}
```

### 2. ุงูุชูุตูุงุช
```http
GET /api/ml/recommendations?user_id=123&type=articles&limit=10
```

### 3. ุงูุชูุจุค ุจุงูุฃุฏุงุก
```http
POST /api/ml/performance-prediction
Content-Type: application/json

{
  "article_content": "ูุญุชูู ุงูููุงู",
  "metadata": {
    "section": "ุชูููุฉ",
    "publish_time": "2024-01-15T10:00:00Z"
  }
}
```

## ูุฑุงูุจุฉ ุงูุฃุฏุงุก

### 1. ููุงููุณ ุงูุฃุฏุงุก
```python
# ูุฑุงูุจุฉ ุฏูุฉ ุงูููุงุฐุฌ
def monitor_model_performance():
    """ูุฑุงูุจุฉ ุฃุฏุงุก ุงูููุงุฐุฌ"""
    sentiment_accuracy = evaluate_sentiment_model()
    recommendation_precision = evaluate_recommendations()
    
    log_metrics({
        'sentiment_accuracy': sentiment_accuracy,
        'recommendation_precision': recommendation_precision,
        'timestamp': datetime.now()
    })
```

### 2. ุฅูุฐุงุฑุงุช ุงูุฃุฏุงุก
```python
# ุฅูุฐุงุฑุงุช ุนูุฏ ุงูุฎูุงุถ ุงูุฃุฏุงุก
def check_performance_alerts():
    """ูุญุต ุฅูุฐุงุฑุงุช ุงูุฃุฏุงุก"""
    if sentiment_accuracy < 0.85:
        send_alert("ุงูุฎูุงุถ ุฏูุฉ ูููุฐุฌ ุงููุดุงุนุฑ")
    
    if recommendation_precision < 0.80:
        send_alert("ุงูุฎูุงุถ ุฏูุฉ ุงูุชูุตูุงุช")
```

## ุงูุชุญุณูู ูุงูุชุทููุฑ

### 1. ุชุญุณูู ุงูููุงุฐุฌ
- **A/B Testing**: ุงุฎุชุจุงุฑ ููุงุฐุฌ ูุฎุชููุฉ
- **ุงูุชุนูู ุงูุชูุงุนูู**: ุชุญุณูู ุงูููุงุฐุฌ ุจูุงุกู ุนูู ุงูุชูุงุนู
- **ุงูุชุญุฏูุซ ุงูุชููุงุฆู**: ุชุญุฏูุซ ุงูููุงุฐุฌ ุจูุงุกู ุนูู ุงูุจูุงูุงุช ุงูุฌุฏูุฏุฉ

### 2. ุชูุณูุน ุงูุฎุฏูุงุช
- **ุชุญููู ุงูุตูุฑ**: ุฅุถุงูุฉ ูุนุงูุฌุฉ ุงูุตูุฑ
- **ุชุญููู ุงูููุฏูู**: ุงุณุชุฎุฑุงุฌ ุงููุญุชูู ูู ุงูููุฏูููุงุช
- **ุงูุชุฑุฌูุฉ ุงูุชููุงุฆูุฉ**: ุชุฑุฌูุฉ ุงููุญุชูู ุจูู ุงููุบุงุช

## ุงูุฃูุงู ูุงูุฎุตูุตูุฉ

### 1. ุญูุงูุฉ ุงูุจูุงูุงุช
```python
# ุชุดููุฑ ุงูุจูุงูุงุช ุงูุญุณุงุณุฉ
def encrypt_user_data(data):
    """ุชุดููุฑ ุจูุงูุงุช ุงููุณุชุฎุฏู"""
    return encrypt_with_aes(data, get_encryption_key())
```

### 2. ุฅุฎูุงุก ุงููููุฉ
```python
# ุฅุฎูุงุก ูููุฉ ุงูุจูุงูุงุช ููุชุฏุฑูุจ
def anonymize_training_data(data):
    """ุฅุฎูุงุก ูููุฉ ุงูุจูุงูุงุช"""
    return remove_personal_identifiers(data)
```

## ุงูุงุฎุชุจุงุฑุงุช ูุงูุฌูุฏุฉ

### 1. ุงุฎุชุจุงุฑุงุช ุงููุญุฏุฉ
```python
# ุงุฎุชุจุงุฑ ุฏูุฉ ุชุญููู ุงููุดุงุนุฑ
def test_sentiment_analysis():
    """ุงุฎุชุจุงุฑ ุชุญููู ุงููุดุงุนุฑ"""
    positive_text = "ูุฐุง ุฎุจุฑ ุฑุงุฆุน ูููุฑุญ"
    result = analyze_sentiment(positive_text)
    assert result['label'] == 'positive'
    assert result['confidence'] > 0.8
```

### 2. ุงุฎุชุจุงุฑุงุช ุงูุชูุงูู
```python
# ุงุฎุชุจุงุฑ ุงูุชูุงูู ูุน API
def test_api_integration():
    """ุงุฎุชุจุงุฑ ุงูุชูุงูู ูุน API"""
    response = requests.post('/api/ml/text-analysis', json={
        'text': 'ูุต ุชุฌุฑูุจู',
        'analysis_types': ['sentiment']
    })
    assert response.status_code == 200
    assert 'analysis' in response.json()
```

## ุงูุชูุซูู ุงูุชููู

### 1. ูุนุงููุฑ ุงูููุฏ
- **PEP 8**: ูุนุงููุฑ ูุชุงุจุฉ Python
- **Type Hints**: ุชุญุฏูุฏ ุฃููุงุน ุงูุจูุงูุงุช
- **Docstrings**: ุชูุซูู ุงููุธุงุฆู ูุงููุฆุงุช

### 2. ูุซุงู ุงูุชูุซูู
```python
def analyze_sentiment(text: str, language: str = 'ar') -> Dict[str, Any]:
    """
    ุชุญููู ุงููุดุงุนุฑ ูู ุงููุต ุงูุนุฑุจู
    
    Args:
        text (str): ุงููุต ุงููุฑุงุฏ ุชุญูููู
        language (str): ูุบุฉ ุงููุต (ุงูุชุฑุงุถู: 'ar')
    
    Returns:
        Dict[str, Any]: ูุชูุฌุฉ ุงูุชุญููู ุชุญุชูู ุนูู:
            - score: ุฏุฑุฌุฉ ุงููุดุงุนุฑ (-1 ุฅูู 1)
            - label: ุชุตููู ุงููุดุงุนุฑ
            - confidence: ูุณุชูู ุงูุซูุฉ
    
    Raises:
        ValueError: ุฅุฐุง ูุงู ุงููุต ูุงุฑุบุงู
        
    Example:
        >>> result = analyze_sentiment("ุฎุจุฑ ุณุงุฑ ูููุฑุญ")
        >>> print(result['label'])
        'positive'
    """
    pass
```

## ุฅุฏุงุฑุฉ ุงูุฅุนุฏุงุฏุงุช

### 1. ููู ุงูุฅุนุฏุงุฏุงุช
```python
# ml-services/config.py
class MLConfig:
    # ุฅุนุฏุงุฏุงุช ุงูููุงุฐุฌ
    MODEL_PATH = 'models/'
    SENTIMENT_MODEL = 'sentiment_model.pkl'
    
    # ุฅุนุฏุงุฏุงุช API
    API_TIMEOUT = 30
    BATCH_SIZE = 32
    
    # ุฅุนุฏุงุฏุงุช ุงูุชุฏุฑูุจ
    TRAINING_EPOCHS = 100
    LEARNING_RATE = 0.001
```

### 2. ูุชุบูุฑุงุช ุงูุจูุฆุฉ
```bash
# .env
ML_MODEL_PATH=/path/to/models
ML_API_KEY=your_api_key
ML_CACHE_TIMEOUT=3600
```

## ุฅุฑุดุงุฏุงุช ุงูุชุทููุฑ

### 1. ุฅุถุงูุฉ ูููุฐุฌ ุฌุฏูุฏ
1. ุฅูุดุงุก ููู ุงููููุฐุฌ ูู `ml-services/nlp/`
2. ุชูููุฐ ูุงุฌูุฉ ุงูุชุฏุฑูุจ ูุงูุชูููู
3. ุฅุถุงูุฉ ุงุฎุชุจุงุฑุงุช ูู `tests/`
4. ุชุญุฏูุซ API endpoint
5. ุชุญุฏูุซ ุงูุชูุซูู

### 2. ูุซุงู ุฅุถุงูุฉ ุฎุฏูุฉ ุฌุฏูุฏุฉ
```python
# ml-services/nlp/topic_classifier.py
class TopicClassifier:
    """ูุตูู ุงูููุงุถูุน ุงูุนุฑุจูุฉ"""
    
    def __init__(self, model_path: str):
        self.model = load_model(model_path)
    
    def classify_topic(self, text: str) -> Dict[str, Any]:
        """ุชุตููู ููุถูุน ุงููุต"""
        # ุชูููุฐ ุงูุชุตููู
        pass
```

---

**ุขุฎุฑ ุชุญุฏูุซ:** `${new Date().toISOString().split('T')[0]}`  
**ุงููุทูุฑ:** Ali Alhazmi  
**ุงููุฑุงุฌุนุฉ:** ูุนุชูุฏุฉ โ  
**ุงูุญุงูุฉ:** ุฌุงูุฒ ููุฅูุชุงุฌ ๐ 
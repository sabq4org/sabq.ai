# ๐ ุฏููู ูุธุงู ุงูุชูุฌูู ุงูุฐูู ูุชุณุฌูู ุงูุฏุฎูู

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุญุฏูุซ ูุธุงู ุชุณุฌูู ุงูุฏุฎูู ูุฏุนู ุงูุชูุฌูู ุงูุฐูู ุจูุงุกู ุนูู:
1. **ุฑุงุจุท ุงูุฅุฑุฌุงุน ุงููุทููุจ** (callbackUrl)
2. **ููุน ุงููุณุชุฎุฏู** (ูุฏูุฑ ุฃู ูุณุชุฎุฏู ุนุงุฏู)

## ๐ฏ ููููุฉ ุงูุนูู

### 1๏ธโฃ **ุงูุชูุฌูู ุจูุงุกู ุนูู ุฑุงุจุท ุงูุฅุฑุฌุงุน**

ุฅุฐุง ูุงู ููุงู ุฑุงุจุท ูุญุฏุฏ ูู URL parameters:
```
/login?callbackUrl=/profile
/login?redirectTo=/article/123
/login?returnTo=/dashboard/news
```

ุณูุชู ุชูุฌูู ุงููุณุชุฎุฏู ุฅูู ุงูุฑุงุจุท ุงููุทููุจ ุจุนุฏ ุชุณุฌูู ุงูุฏุฎูู ุจูุฌุงุญ.

### 2๏ธโฃ **ุงูุชูุฌูู ุจูุงุกู ุนูู ููุน ุงููุณุชุฎุฏู**

ุฅุฐุง ูู ููู ููุงู ุฑุงุจุท ูุญุฏุฏ:
- **ุงููุฏูุฑูู** (`is_admin: true`) โ `/dashboard`
- **ุงููุณุชุฎุฏููู ุงูุนุงุฏููู** (`is_admin: false`) โ `/` (ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ)

## ๐ ุจูุงูุงุช ุงูุงุฎุชุจุงุฑ

### ูุณุชุฎุฏู ูุฏูุฑ:
```
ุงูุจุฑูุฏ: ali@alhazmi.org
ูููุฉ ุงููุฑูุฑ: 123456
ุงูุชูุฌูู: /dashboard
```

### ูุณุชุฎุฏู ุนุงุฏู:
```
ุงูุจุฑูุฏ: test@test.com
ูููุฉ ุงููุฑูุฑ: 123456
ุงูุชูุฌูู: /
```

## ๐๏ธ ุงูุงุณุชุฎุฏุงู ูู ุงูููุฏ

### ุญูุงูุฉ ุตูุญุฉ ูุฅุฑุณุงู ุงููุณุชุฎุฏู ูุชุณุฌูู ุงูุฏุฎูู:
```typescript
if (!user) {
  router.push(`/login?returnTo=${encodeURIComponent(window.location.pathname)}`);
}
```

### ูู ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู:
```typescript
const searchParams = useSearchParams();
const callbackUrl = searchParams?.get('callbackUrl') || 
                   searchParams?.get('redirectTo') || 
                   searchParams?.get('returnTo');

// ุจุนุฏ ุชุณุฌูู ุงูุฏุฎูู ุจูุฌุงุญ
if (callbackUrl) {
  router.push(callbackUrl);
} else {
  router.push(user.is_admin ? '/dashboard' : '/');
}
```

## โ๏ธ ุงูุชูููู

### ูู API ุชุณุฌูู ุงูุฏุฎูู (`/api/auth/login`):
- ูุชู ุชุญุฏูุฏ `is_admin` ุจูุงุกู ุนูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- `ali@alhazmi.org` โ ูุฏูุฑ
- `test@test.com` โ ูุณุชุฎุฏู ุนุงุฏู

### ูู ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู (`/login`):
- ุชูุฑุฃ query parameters ูุชุญุฏูุฏ ุฑุงุจุท ุงูุฅุฑุฌุงุน
- ุชุญุฏุฏ ุงููุฌูุฉ ุจูุงุกู ุนูู ููุน ุงููุณุชุฎุฏู ุฅุฐุง ูู ููู ููุงู ุฑุงุจุท ูุญุฏุฏ

## ๐ ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู

### 1. ุชุณุฌูู ุฏุฎูู ูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ:
```
/login โ ุชุณุฌูู ุฏุฎูู โ / (ูููุณุชุฎุฏู ุงูุนุงุฏู) ุฃู /dashboard (ูููุฏูุฑ)
```

### 2. ูุญุงููุฉ ุงููุตูู ูุตูุญุฉ ูุญููุฉ:
```
/profile โ ุฅุนุงุฏุฉ ุชูุฌูู โ /login?returnTo=/profile โ ุชุณุฌูู ุฏุฎูู โ /profile
```

### 3. ุฑุงุจุท ูุจุงุดุฑ ูู ุจุฑูุฏ ุฅููุชุฑููู:
```
/login?callbackUrl=/article/special-offer โ ุชุณุฌูู ุฏุฎูู โ /article/special-offer
```

---

**ููุงุญุธุฉ:** ูุชู ุชูุธูู ุฌููุน ุงูุฑูุงุจุท ููุชุฃูุฏ ูู ุฃููุง ุชุจุฏุฃ ุจู `/` ูุฃุณุจุงุจ ุฃูููุฉ. 
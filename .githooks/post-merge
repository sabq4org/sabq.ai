#!/bin/bash

# Git hook ูุนูู ุจุนุฏ git pull/merge
# ูุชุญูู ูู ุงูุชุบููุฑุงุช ูู package.json ููุฐูุฑ ุจุชุดุบูู npm install

echo ""
echo "๐ ==============================================="
echo "๐ ุชูุจูู: ุชู ุชุญุฏูุซ ุงููุดุฑูุน!"
echo "๐ ==============================================="

# ุงูุชุญูู ูู ุชุบููุฑุงุช ูู package.json
if git diff HEAD@{1} --name-only | grep -q "package.json"; then
    echo ""
    echo "โ๏ธ  ุชุญุฐูุฑ: ุชู ุชุนุฏูู package.json"
    echo "๐ฆ ูุฌุจ ุชุดุบูู ุงูุฃูุฑ ุงูุชุงูู:"
    echo ""
    echo "   npm install"
    echo ""
    echo "ุฃู ุงุณุชุฎุฏู ุงูุณูุฑูุจุช ุงูุณุฑูุน:"
    echo ""
    echo "   npm run fix-build"
    echo ""
else
    echo "โ ูุง ุชูุฌุฏ ุชุบููุฑุงุช ูู ุงูุญุฒู"
fi

# ุงูุชุญูู ูู ุชุบููุฑุงุช ูู ููููุงุช UI
if git diff HEAD@{1} --name-only | grep -qE "components/ui/.*\.tsx"; then
    echo ""
    echo "๐จ ุชู ุชุญุฏูุซ ููููุงุช UI"
    echo "๐ฆ ูุฏ ุชุญุชุงุฌ ูุชุดุบูู: npm install"
fi

echo ""
echo "๐ ูุจูุงุก ุงููุดุฑูุน: npm run build"
echo "โถ๏ธ  ูุชุดุบูู ุงููุดุฑูุน: npm start"
echo ""
echo "==============================================="
echo "" 
# ุฏููู ุญู ูุดููุฉ ุงูุชูุงุนูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุญููููุฉ

## ๐ฏ ุงููุดููุฉ
ุงูุชูุงุนูุงุช (ุงูุฅุนุฌุงุจุงุช ูุงูุญูุธ) ุชุฎุชูู ุนูุฏ ุชุญุฏูุซ ุงูุตูุญุฉ ูุฃููุง ูุงูุช ุชูุญูุธ ูู localStorage ููุท.

## โ ุงูุญู ุงููุทุจู

### 1. **ุชุญุฏูุซ API ูุงุณุชุฎุฏุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุญููููุฉ**
- ุชู ุชุญุฏูุซ `/api/interactions/track-activity/route.ts`
- ุงุณุชุฎุฏุงู Prisma ุจุฏูุงู ูู ูููุงุช JSON
- ุญูุธ ูู ุฌุฏุงูู `interactions` ู `loyalty_points` ู `activity_logs`

### 2. **ุชุญุฏูุซ ุตูุญุฉ ุงูููุงู**
- ุฅุฑุณุงู ุฌููุน ุงูุชูุงุนูุงุช ุฅูู API (ูููุณุชุฎุฏููู ูุงูุถููู)
- ูุนุฑู ุซุงุจุช ููุถููู: `guest-anonymous` ุฃู ูุนุฑู ูุฑูุฏ
- ูุธุงู ูุฒุฏูุฌ: localStorage ููุณุฑุนุฉ + ูุงุนุฏุฉ ุงูุจูุงูุงุช ููุฏููููุฉ

### 3. **ุงููุธุงู ุงูุฌุฏูุฏ ูุนูู ูุงูุชุงูู:**
```
ุงููุณุชุฎุฏู ูุถุบุท ุฅุนุฌุงุจ
    โ
ุชุญุฏูุซ ูุงุฌูุฉ ุงููุณุชุฎุฏู ููุฑุงู
    โ
ุญูุธ ูู localStorage (ุณุฑูุน)
    โ
ุฅุฑุณุงู ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช (ุฏุงุฆู)
    โ
ุนุฑุถ ุฅุดุนุงุฑ ุจุงูููุงุท
```

## ๐ง ููุชุญูู ูู ุนูู ุงููุธุงู

### 1. **ุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุญููุงู:**
```bash
npx prisma studio
```
- ุงูุชุญ ุฌุฏูู `interactions`
- ูุฌุจ ุฃู ุชุฑู ุงูุชูุงุนูุงุช ุงูุฌุฏูุฏุฉ

### 2. **ุชุญูู ูู Logs:**
```javascript
// ูู ุงููุชุตูุญ Console
localStorage.getItem('guestId')  // ูุนุฑู ุงูุถูู
localStorage.getItem('sabq_interactions')  // ุงูุชูุงุนูุงุช ุงููุญููุฉ
```

### 3. **ุงุฎุชุจุฑ ุงูุชูุงุนูุงุช:**
1. ุงูุชุญ ููุงู
2. ุงุถุบุท ุฅุนุฌุงุจ
3. ุญุฏุซ ุงูุตูุญุฉ (F5)
4. ูุฌุจ ุฃู ูุจูู ุงูุฅุนุฌุงุจ ูุญููุธุงู

## ๐ ูููุดุฑ ุนูู ุงูุฅูุชุงุฌ

### 1. **ุชุฃูุฏ ูู ูุชุบูุฑุงุช ุงูุจูุฆุฉ:**
```env
DATABASE_URL="mysql://user:password@host:port/database"
```

### 2. **ููุฐ ุงูุฃูุงูุฑ:**
```bash
npm install
npx prisma generate
npx prisma db push
npm run build
npm start
```

### 3. **ุฅุฐุง ููุช ุชุณุชุฎุฏู Vercel:**
- ุฃุถู DATABASE_URL ูู ุฅุนุฏุงุฏุงุช ุงููุดุฑูุน
- ุชุฃูุฏ ูู ุฃู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุชุงุญุฉ ูู Vercel

## โ๏ธ ููุงุญุธุงุช ูููุฉ

### ููุถููู:
- ูุนุฑู ุงูุถูู ูููุดุฃ ูุฑุฉ ูุงุญุฏุฉ ูููุญูุธ ูู localStorage
- ุงูุชูุงุนูุงุช ุชูุญูุธ ุจูุนุฑู ุงูุถูู
- ุนูุฏ ุงูุชุณุฌููุ ูููู ุชุฑุญูู ุงูุชูุงุนูุงุช

### ูููุณุชุฎุฏููู ุงููุณุฌููู:
- ุงูุชูุงุนูุงุช ุชูุญูุธ ุจูุนุฑู ุงููุณุชุฎุฏู ุงูุญูููู
- ุงูููุงุท ุชูุญุณุจ ูุชูุญูุธ ูู ุฌุฏูู loyalty_points

### ุงูุฃุฏุงุก:
- localStorage ูููุฑ ุงุณุชุฌุงุจุฉ ููุฑูุฉ
- ูุงุนุฏุฉ ุงูุจูุงูุงุช ุชุถูู ุงูุญูุธ ุงูุฏุงุฆู
- ูู ุญุงูุฉ ูุดู ุงูุฎุงุฏูุ ุงูุจูุงูุงุช ูุญููุธุฉ ูุญููุงู

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ:

1. **ุชุญูู ูู Network Tab:**
   - ูู ุทูุจ `/api/interactions/track-activity` ูุฑุฌุน 200ุ
   - ูุง ูู ุฑุณุงูุฉ ุงูุฎุทุฃ ุฅู ูุฌุฏุชุ

2. **ุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:**
   ```sql
   SELECT * FROM interactions WHERE user_id LIKE 'guest%' ORDER BY created_at DESC;
   ```

3. **ุชุญูู ูู ุงูุฃุฐููุงุช:**
   - ูู ุงููุณุชุฎุฏู ูู ุตูุงุญูุฉ INSERT ูู ุงูุฌุฏุงููุ

4. **ูุณุญ ุงูุฐุงูุฑุฉ ุงููุคูุชุฉ:**
   ```bash
   rm -rf .next
   npm run build
   ```

## ๐ ุงูุฏุนู
ุฅุฐุง ุงุญุชุฌุช ูุณุงุนุฏุฉ ุฅุถุงููุฉุ ุชุญูู ูู:
- ุณุฌูุงุช ุงูุฎุงุฏู
- Prisma logs
- Browser console 
# ุชูุฑูุฑ ุฅุตูุงุญ ูุดููุฉ ุงูุชูุงุนูุงุช ูุงููุตุงุฏูุฉ - ูุดุฑูุน ุณุจู

## ๐ ููุฎุต ุงููุดููุฉ

ูุงู ุงููุณุชุฎุฏู ููุงุฌู ูุดููุฉ ูู ุงูุชูุงุนู ูุน ุงูููุงูุงุช (ุฅุนุฌุงุจุ ุญูุธ) ุฑุบู ุชุณุฌูู ุงูุฏุฎููุ ุญูุซ ุชุธูุฑ ุฑุณุงูุฉ "ุณุฌู ุฏุฎููู ููุงุญุชูุงุธ ุจุชูุงุนูุงุชู" ุนูุฏ ูุญุงููุฉ ุงูุชูุงุนู.

## ๐ ุงูุชุญููู ุงูุชููู

### ุงููุดุงูู ุงูููุชุดูุฉ:

1. **ูุดููุฉ ูู ุงูุชุญูู ูู ุญุงูุฉ ุชุณุฌูู ุงูุฏุฎูู**: 
   - ุฏุงูุฉ `trackUserInteraction` ูุงูุช ุชุชุญูู ูู `isLoggedIn` ู `userId` ูููู ูู ุชูู ุชุนุฑุถ ุชูุงุตูู ูุงููุฉ ุนู ุณุจุจ ุงููุดู
   - ุนุฏู ูุฌูุฏ ูุนูููุงุช ุชุดุฎูุตูุฉ ูุงููุฉ ูู ุญุงูุฉ ูุดู ุงูุชุญูู

2. **ูุดููุฉ ูู ุฑุณุงุฆู ุงูุฎุทุฃ**:
   - ุฑุณุงุฆู ุงูุฎุทุฃ ูุงูุช ุนุงูุฉ ูุบูุฑ ูููุฏุฉ ูู ุงูุชุดุฎูุต
   - ุนุฏู ูุฌูุฏ ุชูุงุตูู ุนู ุญุงูุฉ ุงููุณุชุฎุฏู ูู console

3. **ูุดููุฉ ูู API ุงูุชูุงุนูุงุช**:
   - ุนุฏู ูุฌูุฏ ุชูุงุตูู ูุงููุฉ ุนู ุงูุฃุฎุทุงุก ูู ุงุณุชุฌุงุจุฉ API
   - ุนุฏู ูุฌูุฏ ูุนูููุงุช ุชุดุฎูุตูุฉ ูู ุญุงูุฉ ูุดู ุงูุฅุฑุณุงู

## ๐๏ธ ุงูุญููู ุงููุทุจูุฉ

### 1. ุชุญุณูู ุฏุงูุฉ `trackUserInteraction`

```typescript
// ุงูุชุญูู ูู ุชุณุฌูู ุงูุฏุฎูู ุจุดูู ุฃูุซุฑ ุฏูุฉ
if (!isLoggedIn || !userId) {
  console.log('๐ ุญุงูุฉ ุชุณุฌูู ุงูุฏุฎูู:', { isLoggedIn, userId, user });
  
  // ุนุฑุถ ุฑุณุงูุฉ ุฃูุซุฑ ุชูุตููุงู ูููุณุชุฎุฏู
  toast.error('ูุฑุฌู ุชุณุฌูู ุงูุฏุฎูู ููุงุญุชูุงุธ ุจุชูุงุนูุงุชู ููุณุจ ุงูููุงุท ๐ฏ', {
    duration: 4000,
    position: 'top-center',
    style: {
      background: '#EF4444',
      color: 'white',
      fontSize: '14px',
    }
  });
  return;
}
```

### 2. ุชุญุณูู ุฏุงูุฉ `handleInteraction` ูู NewsCard

```typescript
const handleInteraction = async (interactionType: string) => {
  // ุงูุชุญูู ูู ุญุงูุฉ ุชุณุฌูู ุงูุฏุฎูู ุจุดูู ุฃูุซุฑ ุฏูุฉ
  if (!isLoggedIn || !userId) {
    console.log('๐ ุญุงูุฉ ุชุณุฌูู ุงูุฏุฎูู ูู handleInteraction:', { 
      isLoggedIn, 
      userId, 
      user,
      interactionType,
      articleId: news.id 
    });
    
    toast.error('ุณุฌู ุฏุฎููู ููุงุญุชูุงุธ ุจุชูุงุนูุงุชู', {
      duration: 4000,
      position: 'top-center',
      style: {
        background: '#EF4444',
        color: 'white',
        fontSize: '14px',
      }
    });
    return;
  }
  // ... ุจุงูู ุงูููุฏ
};
```

### 3. ุฅุถุงูุฉ ุฏุงูุฉ ุงุฎุชุจุงุฑ ุญุงูุฉ ุงููุตุงุฏูุฉ

```typescript
const testAuthStatus = useCallback(async () => {
  try {
    console.log('๐ ุงุฎุชุจุงุฑ ุญุงูุฉ ุชุณุฌูู ุงูุฏุฎูู...');
    
    // ุงูุชุญูู ูู localStorage
    const localUser = localStorage.getItem('user');
    const localUserId = localStorage.getItem('user_id');
    console.log('๐ฑ localStorage:', { localUser, localUserId });
    
    // ุงูุชุญูู ูู ุงูููููุฒ
    const cookies = document.cookie;
    console.log('๐ช Cookies:', cookies);
    
    // ุงุฎุชุจุงุฑ API ุงููุตุงุฏูุฉ
    const response = await fetch('/api/auth/me', {
      method: 'GET',
      credentials: 'include',
      headers: {
        'Content-Type': 'application/json',
      },
    });
    
    console.log('๐ API Response Status:', response.status);
    
    if (response.ok) {
      const data = await response.json();
      console.log('โ API Response Data:', data);
      return data.success && data.user;
    } else {
      const errorData = await response.json().catch(() => ({}));
      console.log('โ API Error:', errorData);
      return false;
    }
  } catch (error) {
    console.error('๐จ Error testing auth status:', error);
    return false;
  }
}, []);
```

### 4. ุชุญุณูู ูุงุฌูุฉ ุงููุณุชุฎุฏู ููุชุดุฎูุต

ุชู ุฅุถุงูุฉ ูููู `UserIntelligenceWidget` ูุญุณู ูุญุชูู ุนูู:

- **ุนุฑุถ ุญุงูุฉ ุชุณุฌูู ุงูุฏุฎูู**: ูุคุดุฑ ุจุตุฑู ูุญุงูุฉ ุงููุตุงุฏูุฉ
- **ุชูุงุตูู ุงููุณุชุฎุฏู**: ุนุฑุถ ูุนูููุงุช ุงููุณุชุฎุฏู ุงูุญุงูู
- **ุฒุฑ ุงุฎุชุจุงุฑ ุงููุตุงุฏูุฉ**: ูุงุฎุชุจุงุฑ ุญุงูุฉ API ุงููุตุงุฏูุฉ
- **ูุนูููุงุช ุงูุชุดุฎูุต**: ุนุฑุถ ุชูุงุตูู localStorage ูุงูููููุฒ

### 5. ุชุญุณูู ุฑุณุงุฆู ุงูุฎุทุฃ ูู API

```typescript
// ุฅุถุงูุฉ ุชูุงุตูู ุฃูุซุฑ ูู ุงุณุชุฌุงุจุฉ API
if (!response.ok) {
  console.error('ูุดู ูู ุฅุฑุณุงู ุงูุชูุงุนู ุฅูู API:', response.statusText);
  const errorData = await response.json().catch(() => ({}));
  console.error('ุชูุงุตูู ุงูุฎุทุฃ:', errorData);
} else {
  console.log('โ ุชู ุฅุฑุณุงู ุงูุชูุงุนู ุจูุฌุงุญ:', { type, articleId, userId });
}
```

## ๐งช ุฎุทูุงุช ุงูุงุฎุชุจุงุฑ

### 1. ุงุฎุชุจุงุฑ ุญุงูุฉ ุชุณุฌูู ุงูุฏุฎูู:
1. ุชุณุฌูู ุงูุฏุฎูู ุจุงูุญุณุงุจ
2. ูุชุญ Developer Tools (F12)
3. ุงูุงูุชูุงู ุฅูู Console
4. ุงูููุฑ ุนูู ุฒุฑ "ุงุฎุชุจุงุฑ ุญุงูุฉ ุงููุตุงุฏูุฉ" ูู ููุฏุฌุช ุงูุฐูุงุก ุงูุงุตุทูุงุนู
5. ูุฑุงุฌุนุฉ ุงููุนูููุงุช ุงููุนุฑูุถุฉ

### 2. ุงุฎุชุจุงุฑ ุงูุชูุงุนูุงุช:
1. ุชุณุฌูู ุงูุฏุฎูู
2. ูุชุญ ุฃู ููุงูุฉ
3. ูุญุงููุฉ ุงูุถุบุท ุนูู ุฒุฑ ุฅุนุฌุงุจ ุฃู ุญูุธ
4. ูุฑุงุฌุนุฉ Console ููุฃุฎุทุงุก ุฃู ุงูุฑุณุงุฆู ุงูุชุดุฎูุตูุฉ

### 3. ุงุฎุชุจุงุฑ API ุงููุตุงุฏูุฉ:
```bash
curl -X GET http://localhost:3003/api/auth/me \
  -H "Content-Type: application/json" \
  -b "auth-token=YOUR_TOKEN_HERE"
```

## ๐ ุงููุชุงุฆุฌ ุงููุชููุนุฉ

### ุจุนุฏ ุงูุฅุตูุงุญ:
- โ ุฑุณุงุฆู ุฎุทุฃ ุฃูุซุฑ ูุถูุญุงู ููููุฏุฉ
- โ ูุนูููุงุช ุชุดุฎูุตูุฉ ููุตูุฉ ูู Console
- โ ูุงุฌูุฉ ูุณุชุฎุฏู ูุญุณูุฉ ูุนุฑุถ ุญุงูุฉ ุงููุตุงุฏูุฉ
- โ ุฏุงูุฉ ุงุฎุชุจุงุฑ ูุญุงูุฉ ุงููุตุงุฏูุฉ
- โ ุชุญุณูู ูู ุชุชุจุน ุงูุฃุฎุทุงุก

### ูุคุดุฑุงุช ุงููุฌุงุญ:
- ุนุฏู ุธููุฑ ุฑุณุงูุฉ "ุณุฌู ุฏุฎููู ููุงุญุชูุงุธ ุจุชูุงุนูุงุชู" ูููุณุชุฎุฏููู ุงููุณุฌููู
- ุนูู ุงูุชูุงุนูุงุช (ุฅุนุฌุงุจุ ุญูุธ) ุจุดูู ุตุญูุญ
- ุนุฑุถ ูุนูููุงุช ุชุดุฎูุตูุฉ ูููุฏุฉ ูู ุญุงูุฉ ูุฌูุฏ ูุดุงูู

## ๐ง ุงููููุงุช ุงููุนุฏูุฉ

1. **`app/page.tsx`**:
   - ุชุญุณูู ุฏุงูุฉ `trackUserInteraction`
   - ุชุญุณูู ุฏุงูุฉ `handleInteraction`
   - ุฅุถุงูุฉ ุฏุงูุฉ `testAuthStatus`
   - ุชุญุณูู ูููู `UserIntelligenceWidget`

2. **`contexts/AuthContext.tsx`**:
   - ุชุญุณูู ุงูุชุญูู ูู ุญุงูุฉ ุงููุตุงุฏูุฉ
   - ุฅุถุงูุฉ ูุนูููุงุช ุชุดุฎูุตูุฉ

3. **`app/api/interactions/route.ts`**:
   - ุชุญุณูู ุฑุณุงุฆู ุงูุฎุทุฃ
   - ุฅุถุงูุฉ ุชูุงุตูู ุฃูุซุฑ ูู ุงูุงุณุชุฌุงุจุงุช

## ๐ ุงูุชูุตูุงุช ุงููุณุชูุจููุฉ

1. **ุฅุถุงูุฉ ูุธุงู ูุฑุงูุจุฉ**: ูุฑุงูุจุฉ ุญุงูุฉ ุงููุตุงุฏูุฉ ุจุดูู ูุณุชูุฑ
2. **ุชุญุณูู ุงูุฃูุงู**: ุฅุถุงูุฉ ุงููุฒูุฏ ูู ุทุจูุงุช ุงูุฃูุงู
3. **ุชุญุณูู ุงูุฃุฏุงุก**: ุชุญุณูู ุงุณุชุนูุงูุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช
4. **ุฅุถุงูุฉ ุฅุดุนุงุฑุงุช**: ุฅุดุนุงุฑุงุช ููุฑูุฉ ูุญุงูุฉ ุงููุตุงุฏูุฉ

## ๐ ููุงุญุธุงุช ูููุฉ

- ุชู ุฅุถุงูุฉ ูุนูููุงุช ุชุดุฎูุตูุฉ ููุตูุฉ ููุณุงุนุฏุฉ ุงููุทูุฑูู ูู ุชุญุฏูุฏ ุงููุดุงูู
- ุชู ุชุญุณูู ุฑุณุงุฆู ุงูุฎุทุฃ ูุชููู ุฃูุซุฑ ูุถูุญุงู ูููุณุชุฎุฏููู
- ุชู ุฅุถุงูุฉ ูุงุฌูุฉ ูุณุชุฎุฏู ูุญุณูุฉ ูุนุฑุถ ุญุงูุฉ ุงููุตุงุฏูุฉ
- ุฌููุน ุงูุชุบููุฑุงุช ูุชูุงููุฉ ูุน ุงููุธุงู ุงูุญุงูู ููุง ุชุคุซุฑ ุนูู ุงููุธุงุฆู ุงูููุฌูุฏุฉ

---

**ุชุงุฑูุฎ ุงูุฅุตูุงุญ**: 2025-01-27  
**ุงููุทูุฑ**: ูุธุงู ุงูุฐูุงุก ุงูุงุตุทูุงุนู  
**ุงูุญุงูุฉ**: ููุชูู โ 